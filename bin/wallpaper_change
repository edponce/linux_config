#!/bin/bash 

usage()
{
    echo
    echo "Usage: $(basename $0) [--help] [--wallpaper WALLPAPER_ID]"
    echo
    echo "Change wallpaper image."
    echo
    echo "Wallpaper IDs:"
    local wid=0
    for each in "$@"; do 
        if [ $wid -eq 0 ]; then
            echo " *$wid -> $each"
        else
            echo "  $wid -> $each"
        fi
        wid=$((wid + 1))
    done
    echo
}

# Default options 
wallid=0
wallfiles=(
"$HOME/Documents/wallpapers/1604-lubuntu-default-wallpaper.png"
"$HOME/Documents/wallpapers/lubuntu-eduardo-wallpaper-1920x1080.png"
"$HOME/Documents/wallpapers/gray_1920x1080.png"
"$HOME/Documents/wallpapers/black_1920x1080.png"
)

# Get command line options 
while [ "$1" ]; do 
    case "$1" in 
        -h | --help)
            usage ${wallfiles[@]}
            exit 0
            ;;
        -w | --wallpaper)
            wallid=$2
            shift 2
            ;;
        *)
            echo "Error: invalid command line option, $1"
            usage ${wallfiles[@]}
            exit 1
            ;;
    esac
done

# Validate
if [ $wallid -lt 0 ] || [ $wallid -ge ${#wallfiles[@]} ]; then
    echo "Error: invalid wallpaper ID value."
    exit 1
fi

wallfile="${wallfiles[$wallid]}"
if [ ! -e "$wallfile" ]; then
    echo "Error: wallpaper file does not exists, \"$wallfile\""
    exit 1
fi

# Run
pcmanfm --set-wallpaper="$wallfile" --wallpaper-mode=stretch

exit 0

