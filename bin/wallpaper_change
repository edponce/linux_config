#!/bin/bash 

. $HOME/bin/error_utils

usage()
{
cat << _EOF_
Usage: $(basename $0) [--help] [--wallpaper WALLPAPER_ID]

Change wallpaper image.

Wallpaper IDs:
_EOF_
local wid=0
for each in "$@"; do 
    case $wid in
        0) echo " *$wid -> $each" ;;
        *) echo "  $wid -> $each" ;;
    esac 
    wid=$((wid + 1))
done
}

# Default options 
wallid=0
wallfiles=(
"$HOME/Documents/wallpapers/1604-lubuntu-default-wallpaper.png"
"$HOME/Documents/wallpapers/lubuntu-eduardo-wallpaper-1920x1080.png"
"$HOME/Documents/wallpapers/gray_1920x1080.png"
"$HOME/Documents/wallpapers/black_1920x1080.png"
)

# Get command line options 
while [ "$1" ]; do 
    case "$1" in 
        -h | --help)
            usage ${wallfiles[@]}
            exit 0
            ;;
        -w | --wallpaper)
            wallid=$2
            shift 2
            ;;
        *)
            usage ${wallfiles[@]}
            error_msg "invalid command line option, $1" 1
            ;;
    esac
done

# Validate
if [ $wallid -lt 0 ] || [ $wallid -ge ${#wallfiles[@]} ]; then
    error_msg "invalid wallpaper ID value" 1
fi

wallfile="${wallfiles[$wallid]}"
if [ ! -e "$wallfile" ]; then
    error_msg "wallpaper file does not exists, '$wallfile'" 1
fi

# Run
pcmanfm --set-wallpaper="$wallfile" --wallpaper-mode=stretch

exit 0

