#!/bin/bash

. $HOME/bin/error_utils

usage()
{
cat << _EOF_
Usage: $(basename $0) [--help] "APPLICATION"

Wrapper to invoke an application and clear terminal after its completion.
_EOF_
}

# Default options
app=

# Get command line options
while [ "$1" ]; do
    case "$1" in
        -h | --help)
            usage
            exit 0
            ;;
        *)
            app="$@"
            shift $#
            ;;
    esac
done

# Validate
if [ -z "$app" ]; then
    error_msg "no application was specified" 1
fi

# app [args]
appname="$(echo "$app" | sed 's/\b\w\+=\S*\s\b//' | awk '{ print $1 }')"
which "$appname" > /dev/null 2>&1
if [ $? -ne 0 ]; then
    error_msg "application '$appname' was not found" 1
fi

# Run
$app
tput clear

exit 0

